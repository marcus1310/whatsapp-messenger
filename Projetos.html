import { useState } from "react";

export default function WhatsAppMessenger() {
  const [clients, setClients] = useState([
    { name: "JoÃ£o", phone: "5598999999999" },
    { name: "Maria", phone: "5598111111111" },
  ]);
  const [selectedClient, setSelectedClient] = useState(null);
  const [date, setDate] = useState("");
  const [time, setTime] = useState("");

  const sendWhatsAppMessage = () => {
    if (!selectedClient || !date || !time) {
      alert("Por favor, selecione um cliente, data e horÃ¡rio.");
      return;
    }
    const message = `OlÃ¡, ${selectedClient.name}! ğŸ¾\n\nSeu pet tem um banho agendado conosco! âœ¨\n\nğŸ“… *Data:* ${date}\nğŸ•’ *HorÃ¡rio:* ${time}\nğŸ’° *Valor:* R$80,00\nğŸ“ *Local:* Rua Exemplo, 123 - Bairro\n\nSeu pet receberÃ¡ um banho completo com produtos de alta qualidade.\n\n*Nossos cuidados incluem:*\nâœ… PrÃ©-lavagem para remoÃ§Ã£o de sujeira\nâœ… Shampoo duplo para higienizaÃ§Ã£o profunda\nâœ… MÃ¡scara hidratante para brilho e maciez\nâœ… Condicionador para suavidade e desembaraÃ§o\n\nAguardamos vocÃªs! ğŸ›ğŸ¶âœ¨`;
    
    const encodedMessage = encodeURIComponent(message);
    const whatsappLink = `https://wa.me/${selectedClient.phone}?text=${encodedMessage}`;
    window.open(whatsappLink, "_blank");
  };

  return (
    <div className="p-6 max-w-lg mx-auto bg-white rounded-xl shadow-md space-y-4">
      <h1 className="text-xl font-bold text-center">Envio AutomÃ¡tico de WhatsApp</h1>
      <label className="block">Selecione o Cliente:</label>
      <select
        className="w-full p-2 border rounded"
        onChange={(e) =>
          setSelectedClient(clients.find((c) => c.phone === e.target.value))
        }
      >
        <option value="">Escolha um cliente</option>
        {clients.map((client) => (
          <option key={client.phone} value={client.phone}>
            {client.name}
          </option>
        ))}
      </select>
      <label className="block">Data do Agendamento:</label>
      <input
        type="date"
        className="w-full p-2 border rounded"
        onChange={(e) => setDate(e.target.value)}
      />
      <label className="block">HorÃ¡rio:</label>
      <input
        type="time"
        className="w-full p-2 border rounded"
        onChange={(e) => setTime(e.target.value)}
      />
      <button
        className="w-full bg-green-500 text-white p-2 rounded hover:bg-green-600"
        onClick={sendWhatsAppMessage}
      >
        Enviar Mensagem no WhatsApp
      </button>
    </div>
  );
}

